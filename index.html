<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Thiá»‡p LÃ¬ XÃ¬ Cao Cáº¥p</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{
  margin:0;overflow:hidden;
  font-family:'Dancing Script',cursive;
  background:#9b0000;
}
video{
  position:fixed;inset:0;
  width:100%;height:100%;object-fit:cover;
  z-index:-5;opacity:.45;
}
.pattern{
  position:fixed;inset:0;
  background:url('banhchung_vector.png') center/cover no-repeat;
  opacity:.25;z-index:-4;
}
canvas{position:fixed;inset:0;z-index:-3}

/* nháº­p tÃªn */
.name-overlay{
  position:fixed;inset:0;z-index:20;
  background:rgba(0,0,0,.6);
  display:flex;align-items:center;justify-content:center;
}
.name-panel{
  background:#fff8e6;padding:26px;border-radius:18px;
  text-align:center;width:280px;box-shadow:0 0 40px gold;
}
.name-panel h2{color:#c40000}
.name-panel input{width:100%;padding:10px;border-radius:10px;font-size:18px}
.name-panel button{margin-top:12px;padding:10px 24px;border:none;border-radius:25px;background:linear-gradient(#ffd700,#ffb700);font-size:18px;font-weight:bold}

/* bao lÃ¬ xÃ¬ */
.wrapper{height:100vh;display:flex;align-items:center;justify-content:center;z-index:5;position:relative}
.envelope{
  width:320px;height:440px;position:relative;perspective:1000px;
}
.cover{
  position:absolute;top:0;left:0;right:0;height:55%;
  background:linear-gradient(#e00000,#b00000);
  border-radius:18px 18px 8px 8px;
  transform-origin:top;
  transition:.8s;
}
.cover.open{transform:rotateX(140deg)}
.body{
  position:absolute;inset:0;background:linear-gradient(#d00000,#ffcc66);
  border-radius:18px;box-shadow:0 20px 50px rgba(0,0,0,.45);
}
.card{
  position:absolute;inset:20px;background:#fff;border-radius:14px;
  padding:18px;text-align:center;
  transform:translateY(120%);
  transition:1s cubic-bezier(.25,.8,.25,1);
}
.envelope.open .card{transform:translateY(0)}

h1{color:#c40000}
.to{font-size:26px;margin:10px 0}
.msg{font-size:22px}

/* hoa rÆ¡i */
.flower{position:fixed;top:-40px;font-size:26px;animation:fall linear infinite;z-index:1}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg)}}
</style>
</head>
<body>

<video autoplay muted loop>
  <source src="fireworks.mp4" type="video/mp4">
</video>
<div class="pattern"></div>
<canvas id="fw"></canvas>

<div class="name-overlay" id="nameBox">
  <div class="name-panel">
    <h2>ğŸ‰ Nháº­p tÃªn ngÆ°á»i nháº­n ğŸ‰</h2>
    <input id="nameInput" placeholder="VÃ­ dá»¥: Minh">
    <button onclick="confirmName()">XÃ¡c nháº­n</button>
  </div>
</div>

<div class="wrapper">
  <div class="envelope" id="env">
    <div class="body"></div>
    <div class="cover" id="cover"></div>
    <div class="card" id="card">
      <h1>ğŸ† ChÃºc Má»«ng NÄƒm Má»›i ğŸ†</h1>
      <div class="to" id="toName">Gá»­i báº¡n</div>
      <div class="msg">ChÃºc má»«ng nÄƒm má»›i! An khang thá»‹nh vÆ°á»£ng, váº¡n sá»± nhÆ° Ã½, tiá»n vÃ´ nhÆ° nÆ°á»›c ğŸ’°<br> NÄƒm má»›i sá»©c khá»e dá»“i dÃ o, cÃ´ng viá»‡c hanh thÃ´ng, gia Ä‘Ã¬nh háº¡nh phÃºc ğŸ‰ ğŸ’°</div>
    </div>
  </div>
</div>

<script>
const canvas=document.getElementById('fw');
const ctx=canvas.getContext('2d');
let W,H;function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}
resize();addEventListener('resize',resize);

let particles=[];
function textFirework(text){
  ctx.clearRect(0,0,W,H);
  ctx.font='bold 80px Dancing Script';
  ctx.textAlign='center';ctx.fillStyle='#fff';
  ctx.fillText(text,W/2,H/2);
  const data=ctx.getImageData(0,0,W,H).data;
  particles=[];
  for(let y=0;y<H;y+=6)for(let x=0;x<W;x+=6){
    if(data[(y*W+x)*4+3]>150){
      particles.push({x:Math.random()*W,y:H+Math.random()*200,tx:x,ty:y});
    }
  }
}
function animate(){
  ctx.clearRect(0,0,W,H);
  particles.forEach(p=>{
    p.x+=(p.tx-p.x)*0.05;
    p.y+=(p.ty-p.y)*0.05;
    ctx.fillStyle='gold';
    ctx.fillRect(p.x,p.y,2,2);
  });
  requestAnimationFrame(animate);
}
animate();

let name='';
function confirmName(){
  name=document.getElementById('nameInput').value.trim();
  if(!name) return alert('Nháº­p tÃªn trÆ°á»›c nhÃ©');
  document.getElementById('toName').innerText='Gá»­i '+name;
  document.getElementById('nameBox').style.display='none';
  textFirework('ChÃºc Má»«ng NÄƒm Má»›i '+name);
  spawnFlowers();
}

const env=document.getElementById('env');
const cover=document.getElementById('cover');
let startY=null;
env.addEventListener('touchstart',e=>startY=e.touches[0].clientY);
env.addEventListener('touchend',e=>{
  const dy=e.changedTouches[0].clientY-startY;
  if(dy<-50){openEnv();}
  if(dy>50){closeEnv();}
});

env.onclick=openEnv;
function openEnv(){cover.classList.add('open');env.classList.add('open');}
function closeEnv(){cover.classList.remove('open');env.classList.remove('open');}

function spawnFlowers(){
  const icons=['ğŸŒ¸','ğŸŒ¼'];
  for(let i=0;i<20;i++){
    const f=document.createElement('div');
    f.className='flower';f.innerText=icons[Math.floor(Math.random()*2)];
    f.style.left=Math.random()*100+'vw';
    f.style.animationDuration=5+Math.random()*4+'s';
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),9000);
  }
}
</script>
</body>
</html>
